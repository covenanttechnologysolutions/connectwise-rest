<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [connectwise-rest](./connectwise-rest.md) &gt; [utils](./connectwise-rest.utils.md) &gt; [CallbackTypes](./connectwise-rest.utils.callbacktypes.md) &gt; [middleware](./connectwise-rest.utils.callbacktypes.middleware.md)

## utils.CallbackTypes.middleware() function

<b>Signature:</b>

```typescript
export declare function middleware(cb: (err: Error | null, req: ExpressRequest, res: ServerResponse, verified: boolean, payload: Entity | undefined) => void): (req: ExpressRequest, res: ServerResponse) => void;
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  cb | (err: Error \| null, req: ExpressRequest, res: ServerResponse, verified: boolean, payload: Entity \| undefined) =&gt; void | callback(err, req, res, verified, payload) |

<b>Returns:</b>

(req: ExpressRequest, res: ServerResponse) =&gt; void

## Example

Express style middleware

```
app.post('/your/api', cw.utils.middleware((err, req, res, verified, payload) => {
 if (err) {
   //handle error
   res.status(500).end();
 } else if (!verified) {
   // send 403 on verification failure
   res.status(403).end();
 } else {
   res.status(200).end()
 }
 const {action, id} = req.query;
 // do something with the payload
}));
```

